import{r as g,o as f,c as h,a as d,w as u,u as a,B as m,b as v,R as C,d as t,F as k,e as A,f as O,t as $,g as T,h as _,i as F,j as L,k as E,l as R,C as U,n as S}from"./index-C2XGK-Le.js";const G="/video/failed1.mp4",J="/video/failedFinal.mp4",j="/assets/E-C2jz_P73.MP3",z="/assets/N-CbOPvYdq.MP3",H="/assets/NE-DzPYgB5-.MP3",q="/assets/W-BWHSQpke.MP3",Q="/assets/NW-DKhDfoGZ.MP3",Y="/assets/S-BOo-f_py.MP3",K="/assets/SE-BlLN36kc.MP3",Z="/assets/SW-DQThdqvJ.MP3",X="/assets/giveup-s06G-I4w.MP3",ee=t("col",{span:6},null,-1),te=t("col",{span:6},null,-1),oe=t("col",{span:6},null,-1),ne=t("col",{span:6},null,-1),se=t("col",{span:6},null,-1),ie=t("col",{span:6},null,-1),le=t("col",{span:6},null,-1),ae=t("col",{span:6},null,-1),de=t("col",{span:6},null,-1),ue=t("source",{src:j,type:"audio/mp3"},null,-1),re=[ue],ce=t("source",{src:z,type:"audio/mp3"},null,-1),pe=[ce],me=t("source",{src:H,type:"audio/mp3"},null,-1),ve=[me],_e=t("source",{src:q,type:"audio/mp3"},null,-1),fe=[_e],ge=t("source",{src:Q,type:"audio/mp3"},null,-1),he=[ge],ye=t("source",{src:Y,type:"audio/mp3"},null,-1),we=[ye],Ce=t("source",{src:K,type:"audio/mp3"},null,-1),Ee=[Ce],Se=t("source",{src:Z,type:"audio/mp3"},null,-1),$e=[Se],De=t("source",{src:X,type:"audio/mp3"},null,-1),Ne=[De],be={__name:"DirectionButtons",emits:["directionSelected"],setup(y,{emit:r}){const c=g(""),i=g(!0),o=r;function l(p){i.value&&(c.value=p,i.value=!1,document.getElementById(p).play())}function s(){o("directionSelected",c.value),i.value=!0}return(p,e)=>(f(),h(k,null,[d(a(C),{gutter:[24,16]},{default:u(()=>[ee,d(a(m),{type:"primary",onClick:e[0]||(e[0]=n=>l("NW")),disabled:!i.value},{default:u(()=>[v("西北方")]),_:1},8,["disabled"]),te,d(a(m),{type:"primary",onClick:e[1]||(e[1]=n=>l("N")),disabled:!i.value},{default:u(()=>[v("北方")]),_:1},8,["disabled"]),oe,d(a(m),{type:"primary",onClick:e[2]||(e[2]=n=>l("NE")),disabled:!i.value},{default:u(()=>[v("东北方")]),_:1},8,["disabled"])]),_:1}),d(a(C),{gutter:[16,24]},{default:u(()=>[ne,d(a(m),{type:"primary",onClick:e[3]||(e[3]=n=>l("W")),disabled:!i.value},{default:u(()=>[v("西方")]),_:1},8,["disabled"]),se,d(a(m),{type:"primary",danger:"",onClick:e[4]||(e[4]=n=>l("giveup")),disabled:!i.value},{default:u(()=>[v("听不清楚")]),_:1},8,["disabled"]),ie,d(a(m),{type:"primary",onClick:e[5]||(e[5]=n=>l("E")),disabled:!i.value},{default:u(()=>[v("东方")]),_:1},8,["disabled"])]),_:1}),d(a(C),{gutter:[16,24]},{default:u(()=>[le,d(a(m),{type:"primary",onClick:e[6]||(e[6]=n=>l("SW")),disabled:!i.value},{default:u(()=>[v("西南方")]),_:1},8,["disabled"]),ae,d(a(m),{type:"primary",onClick:e[7]||(e[7]=n=>l("S")),disabled:!i.value},{default:u(()=>[v("南方")]),_:1},8,["disabled"]),de,d(a(m),{type:"primary",onClick:e[8]||(e[8]=n=>l("SE")),disabled:!i.value},{default:u(()=>[v("东南方")]),_:1},8,["disabled"])]),_:1}),t("audio",{id:"E",onEnded:e[9]||(e[9]=n=>s())},re,32),t("audio",{id:"N",onEnded:e[10]||(e[10]=n=>s())},pe,32),t("audio",{id:"NE",onEnded:e[11]||(e[11]=n=>s())},ve,32),t("audio",{id:"W",onEnded:e[12]||(e[12]=n=>s())},fe,32),t("audio",{id:"NW",onEnded:e[13]||(e[13]=n=>s())},he,32),t("audio",{id:"S",onEnded:e[14]||(e[14]=n=>s())},we,32),t("audio",{id:"SE",onEnded:e[15]||(e[15]=n=>s())},Ee,32),t("audio",{id:"SW",onEnded:e[16]||(e[16]=n=>s())},$e,32),t("audio",{id:"giveup",onEnded:e[17]||(e[17]=n=>s())},Ne,32)],64))}},Pe={class:"timer-box"},ke={__name:"TImer",props:["time","needContinue"],emits:["timeIsUp"],setup(y,{emit:r}){const c=y,i=r,o=g(c.time);let l=null;function s(){clearInterval(l),c.needContinue&&o.value>0&&(l=setInterval(()=>{o.value-=1},1e3))}return A(()=>{s(),o.value<=0&&(i("timeIsUp"),clearInterval(l))}),O(()=>{clearInterval(l)}),(p,e)=>(f(),h("div",Pe," 倒计时："+$(o.value),1))}},We={class:"title"},Ve=t("div",null,"佩戴耳机效果更佳",-1),Ie=t("div",null,"铜钱落于何方",-1),xe=t("source",{src:G,type:"video/mp4"},null,-1),Me=[xe],Be=t("source",{src:J,type:"video/mp4"},null,-1),Ae=[Be],Fe={__name:"InGame",setup(y){let r=null,c=null,i=null,o=null;const l=T(),s=g({showDirectionButtons:!1,showWrongVideo:!1,showDeathVideo:!1,needCOntinueCountDown:!1}),p=g(JSON.parse(localStorage.getItem("gameConfig"))),e=["NW","N","NE","W","E","SW","S","SE"],n=g(e[0]);function W(){n.value=e[Math.floor(Math.random()*e.length)]}function V(){r=new(window.AudioContext||window.webkitAudioContet),c=new Audio("/audio/dropVoice.MP3"),i=r.createMediaElementSource(c),o=r.createPanner(),o.panningModel="HRTF",o.distanceModel="inverse",o.refDistance=1,o.maxDistance=1e4,i.connect(o),o.connect(r.destination),c.addEventListener("ended",N)}function I(){n.value==="NW"?o.setPosition(-1,1,0):n.value==="N"?o.setPosition(0,1,0):n.value==="NE"?o.setPosition(1,1,0):n.value==="W"?o.setPosition(-1,0,0):n.value==="E"?o.setPosition(1,0,0):n.value==="SW"?o.setPosition(-1,-1,0):n.value==="S"?o.setPosition(0,-1,0):n.value==="SE"&&o.setPosition(1,-1,0)}function x(){r||(r=new(window.AudioContext||window.webkitAudioContet),c=new Audio("/audio/dropVoice.MP3"),i=r.createMediaElementSource(c),o=r.createPanner(),o.panningModel="HRTF",o.distanceModel="inverse",o.refDistance=1,o.maxDistance=1e4,i.connect(o),o.connect(r.destination),c.addEventListener("ended",N)),c.play()}function D(w){console.log(w),s.value.needCOntinueCountDown=!1,s.value.showDirectionButtons=!1,w==n.value?(console.log("Correct!"),localStorage.setItem("gameConfig",JSON.stringify(p.value)),_.push("/ingame/"+(parseInt(l.params.roundNum)+1)).then(()=>{S(()=>_.go(0))})):(console.log("Wrong!"),p.value.maxLive<=1?s.value.showDeathVideo=!0:(s.value.showWrongVideo=!0,p.value.maxLive-=1,localStorage.setItem("gameConfig",JSON.stringify(p.value))))}function N(){}function b(){console.log("Video ended"),s.value.showDeathVideo?(s.value.showWrongVideo=!1,s.value.showDeathVideo=!1,_.push("/gameover").then(()=>{S(()=>_.go(0))})):(s.value.showWrongVideo=!1,s.value.showDeathVideo=!1,_.push("/ingame/"+(parseInt(l.params.roundNum)+1)).then(()=>{S(()=>_.go(0))}))}function M(){D("giveup")}function B(){p.value.maxLive<1?_.push("/gameover"):parseInt(l.params.roundNum)>p.value.maxRounds?_.push("/gameover"):(W(),V(),I(),x(),s.value.showDirectionButtons=!0,s.value.needCOntinueCountDown=!0)}return B(),(w,P)=>(f(),h(k,null,[d(ke,{time:p.value.timeLimits,"need-continue":s.value.needCOntinueCountDown,onTimeIsUp:P[0]||(P[0]=Oe=>M())},null,8,["time","need-continue"]),d(a(U),{theme:{algorithm:a(R).darkAlgorithm}},{default:u(()=>[d(a(F),{vertical:"",gap:"small",align:"center",justify:"center"},{default:u(()=>[t("div",We,"第"+$(a(l).params.roundNum)+"轮，共"+$(p.value.maxRounds)+"轮",1),Ve,Ie,s.value.showDirectionButtons?(f(),L(be,{key:0,onDirectionSelected:D})):E("",!0)]),_:1}),s.value.showWrongVideo?(f(),h("video",{key:0,class:"hoverVideo",id:"failed1",autoplay:"",onEnded:b},Me,32)):E("",!0),s.value.showDeathVideo?(f(),h("video",{key:1,class:"hoverVideo",id:"failedFinal",autoplay:"",onEnded:b},Ae,32)):E("",!0)]),_:1},8,["theme"])],64))}};export{Fe as default};
